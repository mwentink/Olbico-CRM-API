﻿# ﻿﻿﻿﻿﻿﻿﻿Olbico-CRM-APIThis is an API to update your CRM with information from Altares Smart.The idea basic is that you create a List as container for companies in the Smart website. You then add your present customers to that List via an API call to Smart. Subsequently in the Smart website you will make a Selection of companies that hold your interest, e.g. companies within a certain region. From that Selection you can exclude the List of present customers, since the Selection will be used to address possible new future customers. This adding an exclusion list to your Selection you also do in the Smart website where you define your Selection. The data of these possible new customers can be downloaded to your CRM system by an API call to Smart.In your CRM you subsequently process that information, and possibly you add new companies to the List in Smart to exclude them in a new information download. That is you collect the information from the Selection in your CRM system, you mark a company as already addressed, and you add that company to de List of companies used for exclusion in your Selection, because you either do not want to approach them twice, or they have become a new customer.## Creating a list in SmartFor creating an empty list in Smart you use the head menu Selection. You select some fake conditions so you'll end up with 0 records. You then save it with the 'Save as list' option in the left pane. Write down the ID from your newly created list, which you can see in the menu List.## Adding companies to that list via the APIYou can add items to that created list by using the PUT call to:> https://smart.altares.nl/api/v201/dnb-nld/list/ListIdWhere in the body of the call you specify the values to be added like this: ```{  "Values": [  	{      "Item1": "415562391"    }  ],  "Email": true,  "Type": "DUNS",  "Name": "",  "Append": true,  "Public": false,  "IncludeFamilyTree": false,  "IsCustomList": false,  "ListCategoryId": 0}```## Creating a selection in SmartSubsequently you create a selection in Smart. The will the companies that will have your interest as a possible new customer. You can exclude your previously created List from the Selection by adding it as an excluded list in the Submenu 'My company'. ## Downloading information from that selection via the APIThere are two possible ways to get information from the selection. The first is directly by specifying the selection id. The second is indirectly by downloading information from a previously created Excel sheet in JSON output.### Specifying the selection.This done by the following GET call:> https://smart.altares.nl/api/v201/dnb-nld/selection/results/SelectionId?currentPage=1&pageSize=1The response will be as the following JSON output: ```{    "pageSize": 1,    "currentPage": 1,    "totalPages": 10,    "totalCount": 10,    "hasPrevious": false,    "hasNext": false,    "companies": [        {            "fields": {                "internalId": "1650672",                "name": "John Fisher Holding B.V.",                "kvk": "220637940800",                "eststatusindicator": "Other",                "kvksoho": "Other",                "indecactive": "No",                "dnbriskindicator": "Other"            }        }    ],    "selectionName": "PossibleNewCustomers"}```### Specifying the selection.Another way is first creating a downloadable file. You do this by first opening the Selection, and then choose the export option. After the information is processed the Selection will be available as an Excel file in the head menu Downloads, submenu Selections. As an alternative to a file download, you can obtain the information from such a file directly as JSON output via the following call.> https://smart.altares.nl/api/v201/dnb-nld/downloads/jsoncontent/DownloadId?currentPage=1&pageSize=1The response will be as the following JSON output: ```{    "PageSize": 1,    "CurrentPage": 1,    "TotalPages": 38,    "TotalCount": 191,    "HasPrevious": false,    "HasNext": true,    "Companies": [        {            "Fields": {                "DUNS nummer": "414007729"            }        }    ],    "SelectionName": null}```